validate preconditions
skip if docs-only
